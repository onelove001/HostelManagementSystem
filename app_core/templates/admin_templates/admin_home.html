{% extends 'admin_templates/base.html' %}

{% block title %} Home {% endblock %}

{% block content %}

<br><br><br><br> 
<!--Main layout-->
<main>
    <div class="container">

    <!--Navbar-->
    <nav class="navbar navbar-expand-lg navbar-dark mdb-color lighten-3 mt-3 mb-5">

        <!-- Navbar brand -->
        <span class="navbar-brand">Management:</span>

        <!-- Collapse button -->
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#basicExampleNav"
            aria-controls="basicExampleNav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collapsible content -->
        <div class="collapse navbar-collapse" id="basicExampleNav">

            <!-- Links -->
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="{% url 'admin-welcome-page' %}">ManageRequests</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'app:manage-transfer' %}">ManageTransfers</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'app:manage-guest' %}">ManageGuests</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'app:manage-complaints' %}">ManageComplaints</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="{% url 'app:manage-rule' %}">ManageRules</a>
                </li>
            </ul>

            <!-- Links -->
            <!-- <form class="form-inline">
                <div class="md-form my-0">
                    <input class="form-control mr-sm-2" type="text" placeholder="Wallet Balance: ${{student_user.wallet}}" aria-label="Search" disabled>
                </div>
            </form> -->
            <!-- form -->

        </div>
        <!-- Collapsible content -->

    </nav>
    <!--/.Navbar-->

    <h2 class="my-5 h2 text-center">Room Requests</h2>
        <div class="table">
            <table class="table-stripped table-hovered table-bordered">
                <thead>
                    <tr>
                        <td>Accomodation ID</td>
                        <td>Student ID</td>
                        <td>Student Name</td>
                        <td>Student Username</td>
                        <td>Room ID</td>
                        <td>Room Name</td>
                        <td>Block Name</td>
                        <td>House Manager</td>
                        <td>Date</td>
                        <td>Action</td>
                    </tr>
                </thead>
                <tbody>
                    {% for request in requestss %}
                    <tr>
                        <td>{{request.id}}</td>
                        <td>{{request.student.id}}</td>
                        <td>{{request.student.first_name}} - {{request.student.last_name}}</td>
                        <td>{{request.student.user.username}}</td>
                        <td>{{request.room.id}}</td>
                        <td>{{request.room.room_name}}</td>
                        <td>{{request.room.block.block_name}}</td>
                        <td>{{request.room.block.house_manager.full_name}}</td>
                        <td>{{request.created_at}}</td>
                        {% if request.approved %}
                        <td><a href="{% url 'app:approve_or_disapprove' request.id %}" type="button" class="btn btn-danger">Disapprove</a></td>
                        {% else %}
                        <td><a href="{% url 'app:approve_or_disapprove' request.id %}" type="button" class="btn btn-success">Approve</a></td>
                        {% endif %}
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</main>

<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>
{% endblock %}